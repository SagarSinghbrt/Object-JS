<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>To-Do List App</title>
		<style>
			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}
			body {
				font-family: Arial, sans-serif;
				background: #f0f2f5;
				padding: 30px;
				display: flex;
				justify-content: center;
			}
			.todo-container {
				background: white;
				padding: 20px;
				width: 100%;
				max-width: 500px;
				border-radius: 10px;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			}
			h2 {
				margin-bottom: 15px;
				text-align: center;
			}

			form {
				display: flex;
				gap: 10px;
				margin-bottom: 15px;
			}

			form input {
				flex: 1;
				padding: 8px;
				font-size: 16px;
			}

			form button {
				padding: 8px 12px;
				font-size: 16px;
				cursor: pointer;
			}

			.filters {
				display: flex;
				justify-content: center;
				gap: 10px;
				margin-bottom: 15px;
			}

			.filters button {
				padding: 5px 10px;
				cursor: pointer;
				border: none;
				border-radius: 4px;
				background: #ddd;
			}

			.filters .active {
				background: #007bff;
				color: white;
			}

			ul {
				list-style: none;
			}

			li {
				padding: 10px;
				background: #f9f9f9;
				margin-bottom: 8px;
				border-radius: 6px;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			li.completed span {
				text-decoration: line-through;
				color: gray;
			}

			.task-actions button {
				margin-left: 5px;
				font-size: 14px;
				cursor: pointer;
			}

			.edit-input {
				flex: 1;
				margin-right: 10px;
			}
		</style>
	</head>
	<body>
		<div class="todo-container">
			<h2>To-Do List</h2>

			<form id="todo-form">
				<input
					type="text"
					id="todo-input"
					placeholder="Enter a task..."
				/>
				<button type="submit">Add</button>
			</form>

			<div class="filters">
				<button data-filter="all" class="active">All</button>
				<button data-filter="completed">Completed</button>
				<button data-filter="pending">Pending</button>
			</div>

			<ul id="todo-list"></ul>
		</div>

		<script>
			const form = document.getElementById("todo-form");
			const input = document.getElementById("todo-input");
			const list = document.getElementById("todo-list");
			const filterButtons = document.querySelectorAll(".filters button");

			let todos = JSON.parse(localStorage.getItem("todos")) || [];
			let currentFilter = "all";
			let editingId = null;

			function saveToLocal() {
				localStorage.setItem("todos", JSON.stringify(todos));
			}

			function renderTodos() {
				list.innerHTML = "";

				const filtered = todos.filter((todo) => {
					if (currentFilter === "completed") return todo.completed;
					if (currentFilter === "pending") return !todo.completed;
					return true;
				});

				filtered.forEach((todo) => {
					const li = document.createElement("li");
					li.className = todo.completed ? "completed" : "";

					const taskContent = document.createElement("div");
					taskContent.style.display = "flex";
					taskContent.style.alignItems = "center";
					taskContent.style.gap = "10px";
					taskContent.style.flex = "1";

					if (editingId === todo.id) {
						const editInput = document.createElement("input");
						editInput.type = "text";
						editInput.value = todo.text;
						editInput.className = "edit-input";
						taskContent.appendChild(editInput);
					} else {
						const span = document.createElement("span");
						span.textContent = todo.text;
						taskContent.appendChild(span);
					}

					const actions = document.createElement("div");
					actions.className = "task-actions";

					const toggleBtn = document.createElement("button");
					toggleBtn.textContent = todo.completed ? "↩️" : "✅";
					toggleBtn.onclick = () => toggleStatus(todo.id);

					const editBtn = document.createElement("button");
					editBtn.textContent = editingId === todo.id ? "💾" : "✏️";
					editBtn.onclick = () => {
						if (editingId === todo.id) {
							const newText = taskContent
								.querySelector("input")
								.value.trim();
							if (newText) {
								todo.text = newText;
								editingId = null;
								saveToLocal();
								renderTodos();
							}
						} else {
							editingId = todo.id;
							renderTodos();
						}
					};

					const deleteBtn = document.createElement("button");
					deleteBtn.textContent = "🗑️";
					deleteBtn.onclick = () => deleteTask(todo.id);

					actions.append(toggleBtn, editBtn, deleteBtn);
					li.append(taskContent, actions);
					list.appendChild(li);
				});
			}

			function addTask(text) {
				todos.push({
					id: Date.now().toString(),
					text,
					completed: false,
				});
				saveToLocal();
				renderTodos();
			}

			function deleteTask(id) {
				todos = todos.filter((todo) => todo.id !== id);
				saveToLocal();
				renderTodos();
			}

			function toggleStatus(id) {
				const todo = todos.find((t) => t.id === id);
				if (todo) {
					todo.completed = !todo.completed;
					saveToLocal();
					renderTodos();
				}
			}

			form.addEventListener("submit", (e) => {
				e.preventDefault();
				const text = input.value.trim();
				if (text) {
					addTask(text);
					input.value = "";
				}
			});

			filterButtons.forEach((btn) => {
				btn.addEventListener("click", () => {
					document
						.querySelector(".filters .active")
						?.classList.remove("active");
					btn.classList.add("active");
					currentFilter = btn.dataset.filter;
					renderTodos();
				});
			});

			renderTodos();
		</script>
	</body>
</html>
